<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SARdine - Basic Example</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    
    #container {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    
    #header {
      background: #2c3e50;
      color: white;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    #header h1 {
      margin: 0;
      font-size: 24px;
      font-weight: 600;
    }
    
    #header p {
      margin: 5px 0 0 0;
      opacity: 0.9;
      font-size: 14px;
    }
    
    #map {
      flex: 1;
      background: #34495e;
    }
    
    #controls {
      position: absolute;
      top: 80px;
      right: 20px;
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      min-width: 200px;
    }
    
    #controls h3 {
      margin: 0 0 10px 0;
      font-size: 14px;
      font-weight: 600;
      color: #2c3e50;
    }
    
    .control-group {
      margin-bottom: 12px;
    }
    
    .control-group label {
      display: block;
      margin-bottom: 4px;
      font-size: 12px;
      color: #7f8c8d;
      font-weight: 500;
    }
    
    .control-group input[type="range"] {
      width: 100%;
    }
    
    .control-group button {
      width: 100%;
      padding: 8px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
    }
    
    .control-group button:hover {
      background: #2980b9;
    }
    
    #info {
      position: absolute;
      bottom: 20px;
      left: 20px;
      background: rgba(44, 62, 80, 0.9);
      color: white;
      padding: 12px 16px;
      border-radius: 6px;
      font-size: 12px;
      font-family: 'Courier New', monospace;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="header">
      <h1>üêü SARdine</h1>
      <p>SAR Data INspection and Exploration</p>
    </div>
    <div id="map"></div>
  </div>

  <div id="controls">
    <h3>Controls</h3>
    <div class="control-group">
      <label>Layer Opacity</label>
      <input type="range" id="opacity" min="0" max="100" value="100">
      <span id="opacity-value">100%</span>
    </div>
    <div class="control-group">
      <button id="load-demo">Load Demo Image</button>
    </div>
    <div class="control-group">
      <button id="fit-bounds">Fit to Bounds</button>
    </div>
    <div class="control-group">
      <button id="clear-layers">Clear Layers</button>
    </div>
  </div>

  <div id="info">
    <div>Zoom: <span id="zoom">-</span></div>
    <div>Center: <span id="center">-</span></div>
    <div>Layers: <span id="layer-count">0</span></div>
  </div>

  <!-- 
    In a real application, you would import from npm package:
    <script type="module">
      import { SARdine } from 'sardine';
      // ... your code
    </script>
  -->
  
  <script type="module">
    // This is a demo that shows how SARdine would be used
    // In production, import from the built package
    
    console.log('SARdine Example Loaded');
    console.log('This is a demonstration of the SARdine API');
    
    // Mock SARdine for demo purposes
    class DemoSARdine {
      constructor(options) {
        console.log('Creating SARdine viewer with options:', options);
        this.container = typeof options.container === 'string'
          ? document.getElementById(options.container)
          : options.container;
        this.layers = new Map();
        this.viewState = options.initialViewState || {
          longitude: 0,
          latitude: 0,
          zoom: 2
        };
        this._updateInfo();
      }
      
      async addLayer(options) {
        console.log('Adding layer:', options.id);
        this.layers.set(options.id, options);
        this._updateInfo();
        return Promise.resolve();
      }
      
      removeLayer(id) {
        console.log('Removing layer:', id);
        this.layers.delete(id);
        this._updateInfo();
      }
      
      updateLayer(id, props) {
        console.log('Updating layer:', id, props);
        const layer = this.layers.get(id);
        if (layer) {
          Object.assign(layer, props);
        }
      }
      
      getViewState() {
        return this.viewState;
      }
      
      setViewState(state) {
        Object.assign(this.viewState, state);
        this._updateInfo();
      }
      
      fitBounds(bounds) {
        console.log('Fitting to bounds:', bounds);
        const [minX, minY, maxX, maxY] = bounds;
        this.viewState.longitude = (minX + maxX) / 2;
        this.viewState.latitude = (minY + maxY) / 2;
        this.viewState.zoom = 8;
        this._updateInfo();
      }
      
      getLayerIds() {
        return Array.from(this.layers.keys());
      }
      
      clearLayers() {
        console.log('Clearing all layers');
        this.layers.clear();
        this._updateInfo();
      }
      
      destroy() {
        console.log('Destroying viewer');
      }
      
      _updateInfo() {
        document.getElementById('zoom').textContent = this.viewState.zoom.toFixed(2);
        document.getElementById('center').textContent = 
          `${this.viewState.longitude.toFixed(4)}, ${this.viewState.latitude.toFixed(4)}`;
        document.getElementById('layer-count').textContent = this.layers.size;
      }
    }
    
    // Initialize viewer
    const viewer = new DemoSARdine({
      container: 'map',
      initialViewState: {
        longitude: -122.4,
        latitude: 37.8,
        zoom: 10
      }
    });
    
    // Setup controls
    const opacitySlider = document.getElementById('opacity');
    const opacityValue = document.getElementById('opacity-value');
    
    opacitySlider.addEventListener('input', (e) => {
      const value = e.target.value;
      opacityValue.textContent = `${value}%`;
      viewer.updateLayer('demo-layer', { opacity: value / 100 });
    });
    
    document.getElementById('load-demo').addEventListener('click', async () => {
      await viewer.addLayer({
        id: 'demo-layer',
        data: '/path/to/demo.tif',  // In real usage, provide actual GeoTIFF URL
        opacity: 1.0
      });
      alert('Demo layer loaded!\n\nIn a real application, this would load an actual GeoTIFF file.');
    });
    
    document.getElementById('fit-bounds').addEventListener('click', () => {
      // Example bounds for San Francisco Bay Area
      viewer.fitBounds([-122.5, 37.7, -122.3, 37.9]);
    });
    
    document.getElementById('clear-layers').addEventListener('click', () => {
      viewer.clearLayers();
    });
    
    console.log('Example ready! Click "Load Demo Image" to simulate loading a SAR image.');
  </script>
</body>
</html>
